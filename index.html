<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Loja de Equipamentos Médicos</title>
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#f6f8fa;
      --card:#ffffff;
      --accent:#0b6cf2;
      --muted:#6b7280;
      --shadow: 0 6px 20px rgba(11,108,242,0.08);
      --radius:12px;
      font-family: 'Inter', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background:linear-gradient(180deg,#f8fbff 0%,var(--bg) 100%);
      color:#0f1724;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      line-height:1.4;
      padding:32px;
    }

    header{
      max-width:1200px;
      margin:0 auto 28px auto;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:16px;
    }
    .brand{
      display:flex;align-items:center;gap:12px;
    }
    .logo{
      width:56px;height:56px;border-radius:10px;background:linear-gradient(135deg,var(--accent),#00c2ff);display:flex;align-items:center;justify-content:center;color:white;font-weight:700;font-size:20px;box-shadow:var(--shadow)
    }
    .brand h1{font-size:18px;margin:0}
    .brand p{margin:0;color:var(--muted);font-size:13px}

    .search-cart{display:flex;align-items:center;gap:12px}
    .search{background:var(--card);padding:8px 12px;border-radius:999px;box-shadow:var(--shadow);display:flex;align-items:center;gap:8px}
    .search input{border:0;outline:0;font-size:14px;background:transparent; width:260px}

    main{max-width:1200px;margin:0 auto}

    .hero{
      display:flex;align-items:center;justify-content:space-between;gap:20px;margin-bottom:22px;
    }
    .hero-left{max-width:680px}
    .hero h2{margin:0;font-size:28px}
    .hero p{color:var(--muted);margin-top:8px}

    .filters{display:flex;gap:10px;margin-top:14px}
    .chip{background:var(--card);padding:8px 12px;border-radius:999px;box-shadow:var(--shadow);font-size:13px}

    /* GRID DE PRODUTOS */
    .grid{
      display:grid;
      grid-template-columns:repeat(auto-fill,minmax(240px,1fr));
      gap:18px;
      margin-top:18px;
    }

    .card{
      background:var(--card);
      border-radius:var(--radius);
      padding:16px;
      box-shadow:var(--shadow);
      display:flex;flex-direction:column;gap:12px;
      transition:transform .18s ease, box-shadow .18s ease;
      min-height:340px;
    }
    .card:hover{transform:translateY(-6px);box-shadow:0 18px 40px rgba(11,108,242,0.12)}

    .thumb{
      height:150px;border-radius:10px;background:linear-gradient(135deg,#eef5ff,#ffffff);display:flex;align-items:center;justify-content:center;font-weight:600;color:var(--muted);font-size:14px
    }
    .meta{display:flex;justify-content:space-between;align-items:center;gap:8px}
    .title{font-weight:600;font-size:15px}
    .desc{color:var(--muted);font-size:13px}

    .price{font-size:18px;font-weight:700;color:var(--accent)}
    .oldprice{font-size:13px;color:var(--muted);text-decoration:line-through}

    .actions{margin-top:auto;display:flex;gap:8px}
    .btn{flex:1;padding:10px 12px;border-radius:10px;border:0;cursor:pointer;font-weight:600}
    .btn.buy{background:var(--accent);color:white;box-shadow:0 6px 18px rgba(11,108,242,0.16)}
    .btn.details{background:transparent;border:1px solid #e6eefb;color:var(--muted)}

    /* footer */
    footer{max-width:1200px;margin:36px auto 0;padding:18px;border-radius:12px;background:linear-gradient(180deg,#fff,#f7f9fc);display:flex;justify-content:space-between;align-items:center;box-shadow:var(--shadow)}
    @media (max-width:720px){
      header,footer{padding:12px}
      .hero{flex-direction:column;align-items:flex-start}
      .search input{width:140px}
    }

    /* --- Cart Modal / Sidebar --- */
    .overlay{
      position:fixed;inset:0;background:rgba(0,0,0,0.4);display:none;align-items:center;justify-content:center;z-index:1200;
    }
    .overlay.open{display:flex}
    .cart-panel{
      width:420px;max-width:94%;background:var(--card);border-radius:12px;padding:18px;box-shadow:0 20px 50px rgba(15,23,36,0.25);
      display:flex;flex-direction:column;gap:12px;
    }
    .cart-header{display:flex;justify-content:space-between;align-items:center}
    .cart-items{max-height:360px;overflow:auto;padding:6px 0;display:flex;flex-direction:column;gap:8px}
    .cart-row{display:flex;justify-content:space-between;gap:8px;align-items:center;padding:8px;border-radius:8px;background:linear-gradient(180deg,#fff,#fbfdff)}
    .cart-row .left{display:flex;flex-direction:column;gap:6px}
    .qty-controls{display:flex;gap:6px;align-items:center}
    .qty-controls button{background:#eef5ff;border:1px solid #e6eefb;padding:6px 8px;border-radius:6px;cursor:pointer}
    .cart-footer{display:flex;justify-content:space-between;align-items:center;margin-top:6px}
    .cart-actions{display:flex;gap:8px}
    .small-btn{padding:8px 10px;border-radius:8px;border:0;cursor:pointer}
    .remove-btn{background:#ffefef;border:1px solid #ffd0d0;color:#c0392b}
    .checkout-btn{background:var(--accent);color:white}
  </style>
</head>
<body>
  <header>
    <div class="brand">
      <div class="logo">MD</div>
      <div>
        <h1>Saúde & Equip</h1>
        <p>Equipamentos médicos e suprimentos</p>
      </div>
    </div>

    <div class="search-cart">
      <div class="search" role="search">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none"><path d="M21 21l-4.35-4.35" stroke="#9AA6C0" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>
        <input id="searchInput" placeholder="Buscar produto, ex: estetoscópio" aria-label="Pesquisar produtos">
      </div>
      <div class="chip" id="cartCount">Carrinho (0)</div>
    </div>
  </header>

  <main>
    <section class="hero">
      <div class="hero-left">
        <h2>Equipamentos médicos confiáveis — preços claros</h2>
        <p>Encontre desde estetoscópios até monitores de sinais. Navegue por categorias e escolha o melhor equipamento para sua clínica ou consultório.</p>
        <div class="filters">
          <div class="chip">Destaques</div>
          <div class="chip">Estetoscópios</div>
          <div class="chip">Monitores</div>
          <div class="chip">Descontos</div>
        </div>
      </div>
      <div>
        <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='220' height='140'><rect rx='12' width='100%' height='100%' fill='%23eef5ff'/><text x='50%' y='50%' dominant-baseline='middle' text-anchor='middle' font-family='Arial' font-size='16' fill='%236b7280'>Imagem do Produto</text></svg>" alt="Ilustração" style="border-radius:12px;box-shadow:var(--shadow)">
      </div>
    </section>

    <section class="grid" aria-label="Lista de produtos" id="productGrid">

      <!-- CARD 1 -->
      <article class="card">
        <div class="thumb">Estetoscópio Premium</div>
        <div class="meta">
          <div>
            <div class="title">Estetoscópio Premium</div>
            <div class="desc">Auscultação clínica com som claro</div>
          </div>
          <div>
            <div class="price">R$ 129,90</div>
            <div class="oldprice">R$ 169,90</div>
          </div>
        </div>
        <p class="desc">Confortável, tubo resistente e campânula dupla. Ideal para consultas médicas.</p>
        <div class="actions">
          <button class="btn details">Ver detalhes</button>
          <button class="btn buy">Comprar</button>
        </div>
      </article>

      <!-- CARD 2 -->
      <article class="card">
        <div class="thumb">Oxímetro Digital</div>
        <div class="meta">
          <div>
            <div class="title">Oxímetro de Pulso</div>
            <div class="desc">SpO₂ e pulso</div>
          </div>
          <div>
            <div class="price">R$ 89,00</div>
          </div>
        </div>
        <p class="desc">Tela OLED, leitura rápida, portátil.</p>
        <div class="actions">
          <button class="btn details">Ver detalhes</button>
          <button class="btn buy">Comprar</button>
        </div>
      </article>

      <!-- CARD 3 -->
      <article class="card">
        <div class="thumb">Monitor de Pressão</div>
        <div class="meta">
          <div>
            <div class="title">Monitor de Pressão Automático</div>
            <div class="desc">Braçadeira adulto</div>
          </div>
          <div>
            <div class="price">R$ 199,00</div>
          </div>
        </div>
        <p class="desc">Memória para 120 leituras, display claro e fácil de usar.</p>
        <div class="actions">
          <button class="btn details">Ver detalhes</button>
          <button class="btn buy">Comprar</button>
        </div>
      </article>

      <!-- CARD 4 -->
      <article class="card">
        <div class="thumb">Termômetro Infravermelho</div>
        <div class="meta">
          <div>
            <div class="title">Termômetro Infravermelho</div>
            <div class="desc">Medição sem contato</div>
          </div>
          <div>
            <div class="price">R$ 149,90</div>
            <div class="oldprice">R$ 179,90</div>
          </div>
        </div>
        <p class="desc">Leitura em 1 segundo, modo bebê, iluminação noturna.</p>
        <div class="actions">
          <button class="btn details">Ver detalhes</button>
          <button class="btn buy">Comprar</button>
        </div>
      </article>

      <!-- CARD 5 -->
      <article class="card">
        <div class="thumb">Balança Clínica</div>
        <div class="meta">
          <div>
            <div class="title">Balança Digital Clínica</div>
            <div class="desc">Capacidade 200 kg</div>
          </div>
          <div>
            <div class="price">R$ 499,00</div>
          </div>
        </div>
        <p class="desc">Plataforma antiderrapante, display grande e leitura precisa.</p>
        <div class="actions">
          <button class="btn details">Ver detalhes</button>
          <button class="btn buy">Comprar</button>
        </div>
      </article>

      <!-- CARD 6 -->
      <article class="card">
        <div class="thumb">Kit Sutura</div>
        <div class="meta">
          <div>
            <div class="title">Kit de Sutura (10 peças)</div>
            <div class="desc">Instrumentos estéreis</div>
          </div>
          <div>
            <div class="price">R$ 79,90</div>
          </div>
        </div>
        <p class="desc">Inclui porta-agulha, tesoura e pinça estéril.</p>
        <div class="actions">
          <button class="btn details">Ver detalhes</button>
          <button class="btn buy">Comprar</button>
        </div>
      </article>

      <!-- CARD 7 -->
      <article class="card">
        <div class="thumb">Máscara Cirúrgica</div>
        <div class="meta">
          <div>
            <div class="title">Caixa com 50 Máscaras</div>
            <div class="desc">Descartáveis 3 camadas</div>
          </div>
          <div>
            <div class="price">R$ 39,90</div>
          </div>
        </div>
        <p class="desc">Confortáveis e com ajuste nasal, ideal para clínicas e consultórios.</p>
        <div class="actions">
          <button class="btn details">Ver detalhes</button>
          <button class="btn buy">Comprar</button>
        </div>
      </article>

      <!-- CARD 8 -->
      <article class="card">
        <div class="thumb">Luvas de Procedimento</div>
        <div class="meta">
          <div>
            <div class="title">Luvas de Nitrila (cx 100)</div>
            <div class="desc">Tamanho M</div>
          </div>
          <div>
            <div class="price">R$ 89,90</div>
          </div>
        </div>
        <p class="desc">Ambidestras e sem pó, alta resistência.</p>
        <div class="actions">
          <button class="btn details">Ver detalhes</button>
          <button class="btn buy">Comprar</button>
        </div>
      </article>

    </section>

  </main>

  <footer>
    <div>
      <strong>Saúde & Equip</strong>
      <div style="color:var(--muted);font-size:13px">Atendimento: seg - sex · 9:00 - 18:00</div>
    </div>
    <div style="color:var(--muted);font-size:13px">© 2025 Saúde & Equip. Todos os direitos reservados.</div>
  </footer>

  <!-- CART MODAL -->
  <div class="overlay" id="cartOverlay" aria-hidden="true">
    <div class="cart-panel" role="dialog" aria-modal="true" aria-labelledby="cartTitle">
      <div class="cart-header">
        <h3 id="cartTitle">🛒 Seu Carrinho</h3>
        <button id="closeCartBtn" title="Fechar">✕</button>
      </div>
      <div class="cart-items" id="cartItems">
        <!-- itens do carrinho -->
      </div>

      <div class="cart-footer">
        <div><strong>Total:</strong> <span id="cartTotal">R$ 0,00</span></div>
        <div class="cart-actions">
          <button class="small-btn remove-btn" id="clearCartBtn">Limpar</button>
          <button class="small-btn checkout-btn" id="checkoutBtn">Finalizar</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    /* ---------- UTIL ---------- */
    function parsePrice(text){
      if(!text) return 0;
      let s = String(text).trim();
      s = s.replace(/[R$\s]/g,'');
      if(s.indexOf(',') > -1 && s.indexOf('.') > -1){
        s = s.replace(/\./g,'').replace(',', '.');
      } else {
        s = s.replace(',', '.');
      }
      s = s.replace(/[^\d.-]/g,'');
      return parseFloat(s) || 0;
    }
    function formatBRL(value){
      return value.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
    }

    /* ---------- SETUP ---------- */
    const CART_KEY = 'saude_equip_cart_v1';
    let cart = JSON.parse(localStorage.getItem(CART_KEY) || '[]');

    // grab DOM
    const searchInput = document.getElementById('searchInput');
    const cartCountEl = document.getElementById('cartCount');
    const buyButtons = document.querySelectorAll('.btn.buy');
    const detailsButtons = document.querySelectorAll('.btn.details');
    const cards = document.querySelectorAll('.card');
    const overlay = document.getElementById('cartOverlay');
    const cartItemsContainer = document.getElementById('cartItems');
    const cartTotalEl = document.getElementById('cartTotal');
    const closeCartBtn = document.getElementById('closeCartBtn');
    const clearCartBtn = document.getElementById('clearCartBtn');
    const checkoutBtn = document.getElementById('checkoutBtn');

    // Build products array from the existing DOM cards to keep layout identical
    const products = Array.from(cards).map((card, idx) => {
      const titleEl = card.querySelector('.title');
      const descEl = card.querySelectorAll('.desc');
      const priceEl = card.querySelector('.price');
      const oldPriceEl = card.querySelector('.oldprice');

      const title = titleEl ? titleEl.textContent.trim() : `Produto ${idx+1}`;
      const desc = (card.textContent || '').trim();
      const price = priceEl ? parsePrice(priceEl.textContent) : 0;
      const oldPrice = oldPriceEl ? parsePrice(oldPriceEl.textContent) : null;

      // set data attribute to card for easy reference
      card.dataset.pid = idx;
      return { pid: idx, title, desc, price, oldPrice };
    });

    /* ---------- CART LOGIC ---------- */
    function saveCart(){
      localStorage.setItem(CART_KEY, JSON.stringify(cart));
    }

    function cartTotalCount(){
      return cart.reduce((s,i)=> s + i.qty, 0);
    }

    function updateCartBadge(){
      const count = cartTotalCount();
      cartCountEl.textContent = `Carrinho (${count})`;
    }

    function addToCartByPid(pid, qty=1){
      const p = products[pid];
      if(!p) return;
      const found = cart.find(i => i.pid === pid);
      if(found){
        found.qty += qty;
      } else {
        cart.push({ pid: p.pid, name: p.title, price: p.price, qty });
      }
      saveCart();
      updateCartBadge();
      renderCartItems();
      // pequena animação visual
      cartCountEl.style.transform = 'scale(1.08)';
      setTimeout(()=> cartCountEl.style.transform = '', 140);
    }

    function removeFromCartByIndex(index){
      if(index < 0 || index >= cart.length) return;
      cart.splice(index,1);
      saveCart();
      updateCartBadge();
      renderCartItems();
    }

    function changeQty(index, delta){
      if(index < 0 || index >= cart.length) return;
      cart[index].qty = Math.max(1, cart[index].qty + delta);
      saveCart();
      updateCartBadge();
      renderCartItems();
    }

    function clearCart(){
      cart = [];
      saveCart();
      updateCartBadge();
      renderCartItems();
    }

    /* ---------- RENDER CART ---------- */
    function renderCartItems(){
      cartItemsContainer.innerHTML = '';
      if(cart.length === 0){
        cartItemsContainer.innerHTML = '<div style="color:var(--muted)">Seu carrinho está vazio.</div>';
        cartTotalEl.textContent = formatBRL(0);
        return;
      }
      let total = 0;
      cart.forEach((item, idx) => {
        const p = products.find(pp => pp.pid === item.pid) || {};
        const subtotal = item.price * item.qty;
        total += subtotal;

        const row = document.createElement('div');
        row.className = 'cart-row';
        row.innerHTML = `
          <div class="left">
            <div style="font-weight:600">${item.name}</div>
            <div style="color:var(--muted);font-size:13px">${formatBRL(item.price)} • qtd: ${item.qty}</div>
            <div class="qty-controls" style="margin-top:6px;">
              <button data-action="decrease" data-idx="${idx}">−</button>
              <span style="min-width:28px;text-align:center;display:inline-block">${item.qty}</span>
              <button data-action="increase" data-idx="${idx}">+</button>
            </div>
          </div>
          <div style="display:flex;flex-direction:column;align-items:flex-end;gap:6px;">
            <div style="font-weight:700">${formatBRL(subtotal)}</div>
            <button class="remove-btn" data-action="remove" data-idx="${idx}">Remover</button>
          </div>
        `;
        cartItemsContainer.appendChild(row);
      });
      cartTotalEl.textContent = formatBRL(total);
    }

    /* ---------- EVENTS ---------- */

    // Attach buy buttons
    buyButtons.forEach(btn => {
      btn.addEventListener('click', (e) => {
        const card = btn.closest('.card');
        const pid = Number(card.dataset.pid);
        addToCartByPid(pid, 1);
      });
    });

    // Attach details buttons (abre modal simples)
    detailsButtons.forEach(btn => {
      btn.addEventListener('click', (e) => {
        const card = btn.closest('.card');
        const pid = Number(card.dataset.pid);
        const p = products[pid];
        // modal simplificado usando overlay
        const html = `
          <div style="max-width:520px;background:var(--card);padding:18px;border-radius:12px;box-shadow:var(--shadow);">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;">
              <strong style="font-size:18px">${p.title}</strong>
              <button id="tmpClose">✕</button>
            </div>
            <p style="color:var(--muted)">${p.desc}</p>
            <p style="font-weight:700;margin-top:8px">${formatBRL(p.price)} ${p.oldPrice ? '<span style="text-decoration:line-through;color:var(--muted);font-weight:400;margin-left:8px">'+formatBRL(p.oldPrice)+'</span>' : ''}</p>
            <div style="display:flex;gap:8px;margin-top:12px;">
              <button id="tmpAdd" class="btn buy" style="flex:0">Adicionar ao carrinho</button>
              <button id="tmpClose2" class="btn details" style="flex:0">Fechar</button>
            </div>
          </div>
        `;
        const tmpOverlay = document.createElement('div');
        tmpOverlay.style.position = 'fixed';
        tmpOverlay.style.inset = 0;
        tmpOverlay.style.background = 'rgba(0,0,0,0.5)';
        tmpOverlay.style.display = 'flex';
        tmpOverlay.style.alignItems = 'center';
        tmpOverlay.style.justifyContent = 'center';
        tmpOverlay.style.zIndex = 1300;
        tmpOverlay.innerHTML = html;
        document.body.appendChild(tmpOverlay);
        document.body.style.overflow = 'hidden';
        function closeTmp(){
          document.body.removeChild(tmpOverlay);
          document.body.style.overflow = '';
        }
        tmpOverlay.querySelector('#tmpClose').addEventListener('click', closeTmp);
        tmpOverlay.querySelector('#tmpClose2').addEventListener('click', closeTmp);
        tmpOverlay.querySelector('#tmpAdd').addEventListener('click', () => {
          addToCartByPid(pid,1);
          closeTmp();
        });
      });
    });

    // open cart overlay
    cartCountEl.addEventListener('click', () => {
      overlay.classList.add('open');
      overlay.setAttribute('aria-hidden','false');
      document.body.style.overflow = 'hidden';
      renderCartItems();
    });
    // close cart
    closeCartBtn.addEventListener('click', () => {
      overlay.classList.remove('open');
      overlay.setAttribute('aria-hidden','true');
      document.body.style.overflow = '';
    });
    // click fora do painel fecha
    overlay.addEventListener('click', (e) => {
      if(e.target === overlay){
        overlay.classList.remove('open');
        overlay.setAttribute('aria-hidden','true');
        document.body.style.overflow = '';
      }
    });

    // delegate cart item actions (increase/decrease/remove)
    cartItemsContainer.addEventListener('click', (e) => {
      const action = e.target.dataset.action;
      const idx = e.target.dataset.idx;
      if(action === 'increase') changeQty(Number(idx), +1);
      if(action === 'decrease') changeQty(Number(idx), -1);
      if(action === 'remove') removeFromCartByIndex(Number(idx));
    });

    clearCartBtn.addEventListener('click', () => {
      clearCart();
    });

    checkoutBtn.addEventListener('click', () => {
      // simples comportamento: alerta com resumo (pode integrar gateway depois)
      if(cart.length === 0){ alert('Seu carrinho está vazio.'); return; }
      let summary = 'Resumo da compra:\n';
      cart.forEach(i => {
        summary += `${i.name} x${i.qty} — ${formatBRL(i.price * i.qty)}\n`;
      });
      summary += `\nTotal: ${cartTotalEl.textContent}\n\n(Compra simulada)`;
      alert(summary);
    });

    // search functionality (filtra cards)
    searchInput.addEventListener('input', () => {
      const term = searchInput.value.trim().toLowerCase();
      cards.forEach(card => {
        const text = card.textContent.toLowerCase();
        card.style.display = text.includes(term) ? '' : 'none';
      });
    });

    // keyboard: Esc fecha o modal
    document.addEventListener('keydown', (e) => {
      if(e.key === 'Escape'){
        if(overlay.classList.contains('open')){
          overlay.classList.remove('open');
          overlay.setAttribute('aria-hidden','true');
          document.body.style.overflow = '';
        }
      }
    });

    /* ---------- INIT ---------- */
    updateCartBadge();
    renderCartItems();

    // keep products in sync if you later change markup: debug helper
    // console.log(products);
  </script>
</body>
</html>